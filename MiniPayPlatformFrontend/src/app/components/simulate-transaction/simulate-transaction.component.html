<div class="space-y-4">
  <div class="flex justify-between items-center">
    <h2 class="text-2xl font-bold text-gray-800">Simulate Transaction</h2>
  </div>

  <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()"
    class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
    <!-- Form Content -->
    <div class="p-8 space-y-8">
      <!-- Primary Information Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Payment Provider Field -->
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Payment Provider <span class="text-red-500">*</span>
          </label>
          <select formControlName="paymentProviderId"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-900"
            [class.border-red-500]="
              f['paymentProviderId'].touched && f['paymentProviderId'].invalid
            " [class.focus:ring-red-500]="
              f['paymentProviderId'].touched && f['paymentProviderId'].invalid
            " required>
            <option value="-1" disabled>Select a payment provider</option>
            <option *ngFor="let provider of paymentProviders" [value]="provider.id">
              {{ provider.name }} ({{ provider.currency }})
            </option>
          </select>
          <div *ngIf="
              f['paymentProviderId'].touched && f['paymentProviderId'].invalid
            " class="mt-2 space-y-1">
            <small *ngIf="f['paymentProviderId'].errors?.['required']" class="flex items-center text-red-600 text-sm">
              <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                  d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                  clip-rule="evenodd"></path>
              </svg>
              Payment provider is required
            </small>
          </div>
        </div>

        <!-- Amount Field -->
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Amount <span class="text-red-500">*</span>
          </label>
          <input formControlName="amount" type="number" min="0.1" step="0.01" placeholder="100.00"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900"
            [class.border-red-500]="f['amount'].touched && f['amount'].invalid" [class.focus:ring-red-500]="
              f['amount'].touched && f['amount'].invalid
            " required />
          <div *ngIf="f['amount'].touched && f['amount'].invalid" class="mt-2 space-y-1">
            <small *ngIf="f['amount'].errors?.['required']" class="flex items-center text-red-600 text-sm">
              <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                  d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                  clip-rule="evenodd"></path>
              </svg>
              Amount is required
            </small>
            <small *ngIf="f['amount'].errors?.['min']" class="flex items-center text-red-600 text-sm">
              <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                  d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                  clip-rule="evenodd"></path>
              </svg>
              Amount must be at least 0.1
            </small>
          </div>
        </div>

        <!-- Reference ID Field -->
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Reference ID <span class="text-red-500">*</span>
          </label>
          <input formControlName="referenceId" type="text" placeholder="Enter reference ID"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900"
            [class.border-red-500]="
              f['referenceId'].touched && f['referenceId'].invalid
            " [class.focus:ring-red-500]="
              f['referenceId'].touched && f['referenceId'].invalid
            " required />
          <div *ngIf="f['referenceId'].touched && f['referenceId'].invalid" class="mt-2 space-y-1">
            <small *ngIf="f['referenceId'].errors?.['required']" class="flex items-center text-red-600 text-sm">
              <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                  d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                  clip-rule="evenodd"></path>
              </svg>
              Reference ID is required
            </small>
            <small *ngIf="f['referenceId'].errors?.['minlength']" class="flex items-center text-red-600 text-sm">
              <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                  d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                  clip-rule="evenodd"></path>
              </svg>
              Must be at least 3 characters
            </small>
          </div>
        </div>
      </div>

      <!-- Description Field (Full Width) -->
      <div class="space-y-2">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Description <span class="text-red-500">*</span>
        </label>
        <textarea formControlName="description" rows="4" placeholder="Enter a description for this transaction"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900 resize-none"
          [class.border-red-500]="
            f['description'].touched && f['description'].invalid
          " [class.focus:ring-red-500]="
            f['description'].touched && f['description'].invalid
          "></textarea>
        <div *ngIf="f['description'].touched && f['description'].invalid" class="mt-2">
          <small *ngIf="f['description'].errors?.['required']" class="flex items-center text-red-600 text-sm">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                clip-rule="evenodd"></path>
            </svg>
            Amount is required
          </small>
          <small *ngIf="f['description'].errors?.['maxlength']" class="flex items-center text-red-600 text-sm">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                clip-rule="evenodd"></path>
            </svg>
            Must be max 500 characters
          </small>
        </div>
      </div>
    </div>

    <!-- Form Footer -->
    <div class="bg-gray-50 px-8 py-6 border-t border-gray-200">
      <div class="flex items-center justify-end space-x-4">
        <button type="button"
          class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 font-medium cursor-pointer"
          (click)="transactionForm.reset()">
          Clear
        </button>
        <button type="submit" [disabled]="transactionForm.invalid || isLoading"
          class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 cursor-pointer">
          <svg *ngIf="isLoading" class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
            </path>
          </svg>
          <svg *ngIf="!isLoading" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
          </svg>
          <span>{{ isLoading ? "Processing..." : "Process Transaction" }}</span>
        </button>
      </div>
    </div>
  </form>

  <!-- Response Section -->
  <div *ngIf="response" class="mt-8 bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
    <div class="p-8">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-bold text-gray-800">Transaction Result</h3>
        <div class="flex items-center space-x-2">
          <div class="w-3 h-3 rounded-full" [class.bg-green-500]="response.status === 'Success'"
            [class.bg-red-500]="response.status === 'Failed'" [class.bg-yellow-500]="response.status === 'Pending'">
          </div>
          <span class="text-sm font-medium" [class.text-green-600]="response.status === 'Success'"
            [class.text-red-600]="response.status === 'Failed'" [class.text-yellow-600]="response.status === 'Pending'">
            {{ response.status }}
          </span>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-500 mb-1">Transaction ID</label>
            <p class="text-gray-900 font-mono text-sm">
              {{ response.transactionId }}
            </p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-500 mb-1">Reference ID</label>
            <p class="text-gray-900">{{ response.referenceId }}</p>
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-500 mb-1">Timestamp</label>
            <p class="text-gray-900">
              {{ response.timestamp | date: "medium" }}
            </p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-500 mb-1">Message</label>
            <p class="text-gray-900">{{ response.message }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Response Section Failure -->
  <div *ngIf="failure" class="mt-8 bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
    <div class="p-8">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-bold text-gray-800">Transaction Result</h3>
        <div class="flex items-center space-x-2">
          <div class="w-3 h-3 rounded-full bg-red-500"></div>
          <span class="text-sm font-medium text-red-600"> FAILED </span>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-500 mb-1">Transaction failed:</label>
            <p class="text-gray-900 font-mono text-sm">
              {{ failureMessage }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
